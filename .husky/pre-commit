echo "ğŸ” Running pre-commit checks..."

echo "\nğŸ“ Formatting code..."
pnpm format

echo "\nğŸ“Š Generating dependency graphs..."
pnpm deps:graph

echo "\nğŸ”„ Checking for circular dependencies..."
pnpm circular:check || {
  echo "âŒ Circular dependencies detected. Check docs/dependencies/ reports for details."
  exit 1
}

echo "\nâ• Staging dependency graphs..."
git add docs/dependencies/*.json

echo "\nğŸ” Running linter..."
pnpm lint || {
  echo "âŒ Linting failed. Fix the issues above."
  exit 1
}

echo "\nğŸ”§ Running type checks..."
pnpm type-check || {
  echo "âŒ Type check failed. Fix the type errors above."
  exit 1
}

echo "\nğŸ§ª Running tests with coverage..."
pnpm test:coverage || {
  echo "âŒ Tests failed. Fix the failing tests above."
  exit 1
}

echo "\nğŸ—ï¸  Building project..."
pnpm build || {
  echo "âŒ Build failed. Fix the build errors above."
  exit 1
}

echo "\nâœ… All pre-commit checks passed!"
